version: v1beta1
type: flow
steps:
  - type: task
    name: timer-gen
    resourceArn: acs:fc:::services/fnf-demo/functions/timer-gen

  - type: foreach
    name: test
    iterationMapping:
      collection: $.waits
      item: timestamp
    steps:
      - type: wait
        name: wait
        timestamp: $.timestamp

      - type: task
        name: timer-handler
        resourceArn: acs:fc:::services/fnf-demo/functions/timer-handler
        inputMappings:
          - target: triggerTime
            source: $input.timestamp
          - target: payload
            source: $input.payload
          - target: triggerName
            source: $input.triggerName